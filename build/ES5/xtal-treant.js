(function(){function a(a){return new Promise(function(b){var c={},d=a.filter(function(a){return null!==a});d.forEach(function(a){c[a.src]=!0}),d.forEach(function(a){var d=document.createElement('script');d.src=a.src,d.async=!1,d.onload=function(){Object.keys(c).forEach(function(a){if(d.src.endsWith(a))return void delete c[a]}),0===Object.keys(c).length&&b()},document.head.appendChild(d)})})}var b='xtal-treant';if(!customElements.get(b)){var c=self.xtal_treant?xtal_treant.href:document.currentScript.src,d=c.split('/').slice(0,-1).join('/'),e=[],f=self._raphael?_raphael.href:d+'/vendor/raphael.js';e.push({src:f});var g=self._treant?_treant.href:d+'/Treant.js';e.push({src:g}),a(e).then(function(){});var h=document.createElement('template');h.innerHTML='\n    <style>\n         :host {\n            display: block;\n        }\n        \n    </style>\n    <slot></slot>\n    <div id="resizingElement" style="width:100%;height:100%">\n        <div id="chartTarget" style="width:100%;height:100%"></div>\n    </div>\n    ';var i=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a._slotted=!1,a._zoom=0,a._zoomSequence=[],a.attachShadow({mode:'open'}),a.shadowRoot.appendChild(h.content.cloneNode(!0));var c=a.shadowRoot.querySelector('slot');return c.addEventListener('slotchange',function(){a._slotted=!0,a.onPropsChange(),console.log('light dom children changed!')}),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'attributeChangedCallback',value:function(a,b,c){'zoom'===a?(this._zoom=parseFloat(c),this.onPropsChange()):'auto-zoom'===a?(this._autoZoom=null!==c,this._autoZoom?this.configureAutoZoom():this.discontinueAutoZoom()):void 0}},{key:'configureAutoZoom',value:function(){var a=this;this.ro=new ResizeObserver(function(b){var c,d=!0,e=!1;try{for(var f,g,h=function(){var b=f.value,c=b.target.querySelector('svg');return c?void setTimeout(function(){var d=c.width.baseVal.value;a.zoom=b.contentRect.width/d},100):{v:void 0}},i=b[Symbol.iterator]();!(d=(f=i.next()).done);d=!0)if(g=h(),'object'===('undefined'===typeof g?'undefined':babelHelpers.typeof(g)))return g.v}catch(a){e=!0,c=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw c}}}),this.ro.observe(this.getResizingTarget(),null)}},{key:'discontinueAutoZoom',value:function(){this.ro.disconnect()}},{key:'connectedCallback',value:function(){var a=this,b=document.createElement('link');b.setAttribute('rel','stylesheet'),b.setAttribute('type','text/css'),b.setAttribute('href',d+'/Treant.css'),b.addEventListener('load',function(){a._mainCssLoaded=!0,a.onPropsChange()}),this.shadowRoot.appendChild(b)}},{key:'disconnectedCallback',value:function(){this.discontinueAutoZoom()}},{key:'getChartTarget',value:function(){return this.shadowRoot.getElementById('chartTarget')}},{key:'getResizingTarget',value:function(){return this.shadowRoot.getElementById('resizingElement')}},{key:'onPropsChange',value:function(){var a=this;return this._config&&this._mainCssLoaded&&this._secondaryCssLoaded?!this._slotted&&0<this.innerHTML.trim().length?void 0:this._treant&&0<this._zoom?void this.setZoom(this._zoom):void setTimeout(function(){a._treant=new Treant(a.config,null,null,a),0<a._zoom&&a.setZoom(a._zoom)},100):void 0}},{key:'setZoom',value:function(a){var b=[0,0],c=this.getChartTarget();if(c){for(var d=['webkit','moz','ms','o'],e='scale('+a+')',f=100*b[0]+'% '+100*b[1]+'%',g=0;g<d.length;g++)c.style[d[g]+'Transform']=e,c.style[d[g]+'TransformOrigin']=f;c.style.transform=e,c.style.transformOrigin=f,c.style.width=100/a+'%'}}},{key:'config',get:function(){return this._config},set:function(a){var b=this;this._config=a;var c=Array.isArray(a)?a[0]:a.chart;var d=c.cssPaths;if(d){var e=d.slice();c.cssPaths.forEach(function(a){var c=document.createElement('link');c.setAttribute('rel','stylesheet'),c.setAttribute('type','text/css'),c.setAttribute('href',a),c.addEventListener('load',function(){e=e.filter(function(b){return b!==a}),0===e.length&&(b._secondaryCssLoaded=!0),setTimeout(function(){b.onPropsChange()},100)}),b.shadowRoot.appendChild(c)})}else this._secondaryCssLoaded=!0;c.container=this.getChartTarget(),this.onPropsChange()}},{key:'zoom',get:function(){return this._zoom},set:function(a){this.setAttribute('zoom',a.toString())}},{key:'autoZoom',get:function(){return this._autoZoom},set:function(a){a?this.setAttribute('auto-zoom',''):this.removeAttribute('auto-zoom')}}],[{key:'observedAttributes',get:function(){return['zoom','auto-zoom']}}]),b}(HTMLElement);customElements.define(b,i)}})();