(function(){const a='xtal-treant';if(customElements.get(a))return;const b=self.xtal_treant?xtal_treant.href:document.currentScript.src,c=b.split('/').slice(0,-1).join('/'),d=[],e=self._raphael?_raphael.href:c+'/vendor/raphael.js';d.push({src:e});const f=self._treant?_treant.href:c+'/Treant.js';d.push({src:f}),function(a){return new Promise((b)=>{const c={},d=a.filter((a)=>null!==a);d.forEach((a)=>{c[a.src]=!0}),d.forEach((a)=>{const d=document.createElement('script');d.src=a.src,d.async=!1,d.onload=()=>{Object.keys(c).forEach((a)=>{if(d.src.endsWith(a))return void delete c[a]}),0===Object.keys(c).length&&b()},document.head.appendChild(d)})})}(d).then(()=>{});const g=document.createElement('template');g.innerHTML=`
    <style>
         :host {
            display: block;
        }
        
    </style>
    <slot></slot>
    <div id="resizingElement" style="width:100%;height:100%;visibility:hidden">
        <div id="chartTarget" style="width:100%;height:100%"></div>
    </div>
    `;class h extends HTMLElement{constructor(){super(),this._slotted=!1,this._zoom=0,this._zoomSequence=[],this.attachShadow({mode:'open'}),this.shadowRoot.appendChild(g.content.cloneNode(!0));const a=this.shadowRoot.querySelector('slot');a.addEventListener('slotchange',()=>{this._slotted=!0,this.onPropsChange(),console.log('light dom children changed!')})}get config(){return this._config}set config(a){this._config=a;let b=Array.isArray(a)?a[0]:a.chart;const c=b.cssPaths;if(c){let a=c.slice();b.cssPaths.forEach((b)=>{const c=document.createElement('link');c.setAttribute('rel','stylesheet'),c.setAttribute('type','text/css'),c.setAttribute('href',b),c.addEventListener('load',()=>{a=a.filter((a)=>a!==b),0===a.length&&(this._secondaryCssLoaded=!0),setTimeout(()=>{this.onPropsChange()},100)}),this.shadowRoot.appendChild(c)})}else this._secondaryCssLoaded=!0;b.container=this.getChartTarget(),this.onPropsChange()}get zoom(){return this._zoom}set zoom(a){this.setAttribute('zoom',a.toString())}get autoZoom(){return this._autoZoom}set autoZoom(a){a?this.setAttribute('auto-zoom',''):this.removeAttribute('auto-zoom')}static get observedAttributes(){return['zoom','auto-zoom']}attributeChangedCallback(a,b,c){'zoom'===a?(this._zoom=parseFloat(c),this.onPropsChange()):'auto-zoom'===a?(this._autoZoom=null!==c,this._autoZoom?this.configureAutoZoom():this.discontinueAutoZoom()):void 0}configureAutoZoom(){this.ro=new ResizeObserver((a)=>{for(let b of a){const a=b.target.querySelector('svg');if(!a)return;setTimeout(()=>{const c=a.width.baseVal.value;this.zoom=b.contentRect.width/c},100)}}),this.ro.observe(this.getResizingTarget(),null)}discontinueAutoZoom(){this.ro.disconnect()}_upgradeProperty(a){if(this.hasOwnProperty(a)){let b=this[a];delete this[a],this[a]=b}}connectedCallback(){this._upgradeProperty('autoZoom'),this._upgradeProperty('config'),this._upgradeProperty('zoom');const a=document.createElement('link');a.setAttribute('rel','stylesheet'),a.setAttribute('type','text/css'),a.setAttribute('href',c+'/Treant.css'),a.addEventListener('load',()=>{this._mainCssLoaded=!0,this.onPropsChange()}),this.shadowRoot.appendChild(a)}disconnectedCallback(){this.discontinueAutoZoom()}getChartTarget(){return this.shadowRoot.getElementById('chartTarget')}getResizingTarget(){return this.shadowRoot.getElementById('resizingElement')}onPropsChange(){return this._config&&this._mainCssLoaded&&this._secondaryCssLoaded?!this._slotted&&0<this.innerHTML.trim().length?void 0:this._treant&&0<this._zoom?void this.setZoom(this._zoom):void setTimeout(()=>{this._treant=new Treant(this.config,null,null,this),0<this._zoom?this.setZoom(this._zoom):this.displayResizableElement()},1e3):void 0}displayResizableElement(){this.getResizingTarget().style.visibility='visible'}setZoom(a){const b=[0,0],c=this.getChartTarget();if(c){for(var d=['webkit','moz','ms','o'],e='scale('+a+')',f=100*b[0]+'% '+100*b[1]+'%',g=0;g<d.length;g++)c.style[d[g]+'Transform']=e,c.style[d[g]+'TransformOrigin']=f;c.style.transform=e,c.style.transformOrigin=f,c.style.width=100/a+'%',this.displayResizableElement()}}}customElements.define(a,h)})();